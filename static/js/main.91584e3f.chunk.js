(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{22:function(e,t,a){e.exports=a(36)},32:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),s=a(10),u=(a(32),a(3)),i=a(15),l=a(2),f=a.n(l),d=a(4),E=a(9),m=a(11),v=a.n(m),h=new function e(){var t=this;Object(E.a)(this,e),this.baseUrl="https://api.chucknorris.io/jokes",this.fetchData=function(){var e=Object(d.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t.baseUrl).concat(a));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(a)+", received ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getRandomJoke=v()(Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData("/random");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),1e3,{leading:!0}),this.getCategoriesList=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData("/categories");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.getRandomJokeByCategory=v()(function(){var e=Object(d.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData("/random?category=".concat(a.category));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),1e3,{leading:!0}),this.getJokesByText=v()(function(){var e=Object(d.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData("/search?query=".concat(a.query));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),1e3,{leading:!0})},p=function(e){return function(){e({type:"CATEGORIES_REQUEST"}),h.getCategoriesList().then((function(t){e(function(e){return{type:"CATEGORIES_SUCCESS",payload:e}}(t))})).catch((function(e){return console.log(e)}))}},j=function(e){return function(){e({type:"RANDOM_JOKE_REQUEST"}),h.getRandomJoke().then((function(t){e(function(e){return{type:"RANDOM_JOKE_SUCCESS",payload:e}}(t))})).catch((function(e){return console.log(e)}))}},g=(a(34),a(35),function(){return r.a.createElement("div",{className:"loader"})}),k=function(e){var t=e.joke,a=e.favIds,n=e.handleFav,c=new Date,o=new Date(t.updated_at),s=Math.floor((Number(c)-Number(o))/1e3/60/60);return r.a.createElement("div",{className:"joke"},r.a.createElement("div",{className:"joke_content"},a.includes(t.id)?r.a.createElement("div",{className:"heart selected",onClick:function(){return n(t,"remove")}}):r.a.createElement("div",{className:"heart",onClick:function(){return n(t,"add")}}),r.a.createElement("div",{className:"link"},"ID: ",r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:t.url},t.id)),r.a.createElement("div",{className:"text"},t.value),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"update"},"Last update: ",r.a.createElement("b",null,s," hours ago")),t.categories.length>0&&r.a.createElement("div",{className:"category"},t.categories[0]))))},O=Object(s.b)((function(e){return{jokes:e.jokes,search:e.search,categories:e.categories}}),(function(e){return{fetchCategories:p(e),fetchRandomJoke:j(e),fetchJokesByText:function(t){return function(e,t){e({type:"JOKES_BY_TEXT_REQUEST"});var a={query:t};h.getJokesByText(a).then((function(t){e(function(e){return{type:"JOKES_BY_TEXT_SUCCESS",payload:e}}(t))})).catch((function(e){return console.log(e)}))}(e,t)},searchValueChange:function(t){return e({type:"SEARCH_VALUE_CHANGE",payload:t})},fetchJokeByCategory:function(t){return function(e,t){e({type:"JOKE_BY_CATEGORY_REQUEST"});var a={category:t};h.getRandomJokeByCategory(a).then((function(t){e(function(e){return{type:"JOKE_BY_CATEGORY_SUCCESS",payload:e}}(t))})).catch((function(e){return console.log(e)}))}(e,t)},makeFav:function(t){return e(function(e){return{type:"MAKE_FAV",payload:e}}(t))},removeFav:function(t){return e(function(e){return{type:"REMOVE_FAV",payload:e}}(t))},selectCategory:function(t){return e({type:"SELECT_CATEGORY",payload:t})}}}))((function(e){var t=e.jokes,a=e.search,c=e.categories,o=e.fetchCategories,s=e.fetchJokesByText,l=e.searchValueChange,f=e.fetchRandomJoke,d=e.fetchJokeByCategory,E=e.makeFav,m=e.removeFav,v=e.selectCategory,h=Object(n.useState)("random"),p=Object(i.a)(h,2),j=p[0],O=p[1],y=Object(n.useState)(!1),b=Object(i.a)(y,2),C=b[0],S=b[1],_=t.favourites.map((function(e){return e.id}));Object(n.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("favs"));e.length>0&&e.map((function(e){return E(e)})),o()}),[o,E]);var N=function(e,t){var a=[],n=JSON.parse(window.localStorage.getItem("favs"));if(n.length>0&&(a=n),"remove"===t){m(e.id);var r=a.findIndex((function(t){return t.id===e.id}));-1!==r&&window.localStorage.setItem("favs",JSON.stringify([].concat(Object(u.a)(a.slice(0,r)),Object(u.a)(a.slice(r+1)))))}else E(e),window.localStorage.setItem("favs",JSON.stringify([].concat(Object(u.a)(a),[e])))};return r.a.createElement("div",{className:"jokes_wrapper"},r.a.createElement("div",{className:"row_block"},r.a.createElement("div",{className:"main_block"},r.a.createElement("div",{className:"msi"},r.a.createElement("span",null,"MSI 2020"),r.a.createElement("div",{className:"fav_menu",onClick:function(){return S(!C)}},"Favourite")),r.a.createElement("h2",null,"Hey!"),r.a.createElement("h3",null,"Let\u2019s try to find a joke for you:"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},r.a.createElement("div",{className:"variants"},r.a.createElement("div",{className:"variant ".concat("random"===j?"selected":""),onClick:function(){return O("random")}},"Random"),r.a.createElement("div",{className:"variant ".concat("byCategory"===j?"selected":""),onClick:function(){return O("byCategory")}},"From Categories"),"byCategory"===j&&c.value.map((function(e){return r.a.createElement("div",{className:"category ".concat(c.selected===e?"selected":""),key:e,onClick:function(){return v(e)}},e)})),r.a.createElement("div",{className:"variant ".concat("search"===j?"selected":""),onClick:function(){return O("search")}},"Search"),"search"===j&&r.a.createElement("input",{value:a.value,onChange:function(e){return l(e.currentTarget.value)},placeholder:"Free text search..."})),r.a.createElement("button",{type:"submit",onClick:function(){switch(j){case"random":f();break;case"byCategory":d(c.selected);break;case"search":s(a.value)}}},"Get a joke")),r.a.createElement("div",{className:"jokes"},t.isLoading&&r.a.createElement(g,null),t.value.map((function(e){return r.a.createElement(k,{key:e.id,joke:e,favIds:_,handleFav:N})})))),r.a.createElement("div",{className:"fav_block ".concat(C?"open":"")},r.a.createElement("div",{className:"head"},r.a.createElement("h2",null,"Favourite"),r.a.createElement("div",{className:"fav_menu",onClick:function(){return S(!C)}},"Favourite")),r.a.createElement("div",{className:"jokes"},t.favourites.map((function(e){return r.a.createElement(k,{key:e.id,joke:e,favIds:_,handleFav:N})}))))))})),y=function(){return r.a.createElement("div",{className:"main"},r.a.createElement(O,null))},b=a(19),C=a(20),S=a(21),_=function(){return r.a.createElement("div",null,"Error!")},N=function(e){Object(S.a)(a,e);var t=Object(C.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(b.a)(a,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(_,null):this.props.children}}]),a}(n.Component),R=a(7),T=a(1),w={categories:{value:[],selected:"",isLoading:!1},jokes:{value:[],favourites:[],isLoading:!1},search:{value:""}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_VALUE_CHANGE":return Object(T.a)({},e,{search:Object(T.a)({},e.search,{value:t.payload})});case"SELECT_CATEGORY":return Object(T.a)({},e,{categories:Object(T.a)({},e.categories,{selected:t.payload})});case"CATEGORIES_REQUEST":return Object(T.a)({},e,{categories:Object(T.a)({},e.categories,{isLoading:!0})});case"CATEGORIES_SUCCESS":return Object(T.a)({},e,{categories:Object(T.a)({},e.categories,{value:t.payload,isLoading:!1})});case"RANDOM_JOKE_REQUEST":return Object(T.a)({},e,{jokes:Object(T.a)({},e.jokes,{isLoading:!0})});case"RANDOM_JOKE_SUCCESS":return Object(T.a)({},e,{jokes:Object(T.a)({},e.jokes,{value:[t.payload],isLoading:!1})});case"JOKE_BY_CATEGORY_REQUEST":return Object(T.a)({},e,{jokes:Object(T.a)({},e.jokes,{isLoading:!0})});case"JOKE_BY_CATEGORY_SUCCESS":return Object(T.a)({},e,{jokes:Object(T.a)({},e.jokes,{value:[t.payload],isLoading:!1})});case"JOKES_BY_TEXT_REQUEST":return Object(T.a)({},e,{jokes:Object(T.a)({},e.jokes,{isLoading:!0})});case"JOKES_BY_TEXT_SUCCESS":return Object(T.a)({},e,{jokes:Object(T.a)({},e.jokes,{value:t.payload.result,isLoading:!1})});case"MAKE_FAV":return Object(T.a)({},e,{jokes:Object(T.a)({},e.jokes,{favourites:[].concat(Object(u.a)(e.jokes.favourites),[t.payload])})});case"REMOVE_FAV":var a=e.jokes.favourites.findIndex((function(e){return e.id===t.payload}));return-1===a?e:Object(T.a)({},e,{jokes:Object(T.a)({},e.jokes,{favourites:[].concat(Object(u.a)(e.jokes.favourites.slice(0,a)),Object(u.a)(e.jokes.favourites.slice(a+1)))})});default:return e}},A=Object(R.b)(J);o.a.render(r.a.createElement(s.a,{store:A},r.a.createElement(N,null,r.a.createElement(y,null))),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.91584e3f.chunk.js.map